language: node_js
node_js:
  - 12
script:
  - "npm run lint"
  - "npm run test"
services:
  - postgresql
before_script:
  - psql -c 'create database foodSelector;' -U postgres
  - psql -c 'CREATE TABLE public.fs_user
(
    id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    uuid uuid NOT NULL,
    date_created timestamp with time zone DEFAULT now(),
    date_last_login timestamp with time zone DEFAULT now(),
    CONSTRAINT food_selector_user_pkey PRIMARY KEY (id),
    CONSTRAINT fs_user_uuid_key UNIQUE (uuid)
);' -U postgres
env:
   global:
    - PGPORT=5433